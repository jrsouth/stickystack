/* @preserve
 *
 * StickyStack
 *
 * A vanilla javascript sticky-element stacker
 *
 * For licence details and usage see:
 * https://github.com/jrsouth/stickystack
 *
 */
{let e={mobileBreak:768,list:[],number:0,stackTop:0,init:function(){e.stopObserving();for(let t=0;t<e.number;t++){let s=e.list[t].placeholder,l=e.list[t].element;s.parentNode.removeChild(s),e.removeClass(l,"stickystack-stuck"),l.style.position=null,l.style.top=null,l.style.left=null,l.style.width=null,l.style.marginTop=null,l.style.marginBottom=null}e.number=0;let t=document.getElementsByClassName("js-stickystack");if(window.innerWidth<=e.mobileBreak){let s=[];for(let l=0;l<t.length;l++)e.hasClass(t[l],"js-stickystack-nomobile")||s.push(t[l]);t=s}e.number=t.length,e.list=[],e.stackTop=0;for(let s=0;s<e.number;s++){let l=window.getComputedStyle(t[s]),o=document.createElement("div");o.style.width=l.getPropertyValue("width"),o.style.height=l.getPropertyValue("height"),o.style.top=l.getPropertyValue("top"),o.style.right=l.getPropertyValue("right"),o.style.bottom=l.getPropertyValue("bottom"),o.style.left=l.getPropertyValue("left"),o.style.margin=l.getPropertyValue("margin"),o.style.padding=l.getPropertyValue("padding"),o.style.border=l.getPropertyValue("border"),o.style.float=l.getPropertyValue("float"),o.style.clear=l.getPropertyValue("clear"),o.style.position=l.getPropertyValue("position"),o.style.display="none",o.style.visibility="hidden",t[s].parentNode.insertBefore(o,t[s]);let n=e.getCoords(t[s]);e.list.push({element:t[s],top:n.top,left:n.left-parseFloat(l.getPropertyValue("margin-left")),width:parseFloat(l.getPropertyValue("width")),placeholder:o,semistuck:e.hasClass(t[s],"js-stickystack-semi"),zIndex:1e4-s})}e.list.sort(e.sortByTop),e.stackTop=0,t=document.getElementsByClassName("js-stickystack-top");for(let s=0;s<t.length;s++){let l=e.getCoords(t[s]).top;console.log(l),e.stackTop=0==s?l:Math.min(e.stackTop,l)}console.log(t),console.log(e.stackTop),e.update(),e.startObserving()},update:function(){let t=[[e.stackTop,0,document.body.offsetWidth]],s=window.pageYOffset;for(let l=0;l<e.number;l++){let o=e.list[l],n=o.element,i=o.placeholder,r=o.left,a=o.top-s,p=o.width,d=e.getOverlap([a,r,p],t);if(d.overlap>0){i.style.display="block",e.addClass(n,"stickystack-stuck");let a=0;if(e.list[l].semistuck&&l+1<e.number){let t=[[d.absolute+n.offsetHeight,r,p]];for(let o=l+1;o<e.number;o++){let l=[e.list[o].top-s,e.list[o].left,e.list[o].width],n=e.getOverlap(l,t);if(n.overlap>0){a=n.overlap;break}}}n.style.position="fixed",n.style.top=d.absolute-a+"px",n.style.left=r+"px",n.style.width=p+"px",n.style.zIndex=o.zIndex,n.style.marginTop=0,n.style.marginBottom=0,t.push([d.absolute+n.offsetHeight-a,n.offsetLeft,n.offsetWidth])}else e.removeClass(n,"stickystack-stuck"),n.style.position=null,n.style.top=null,n.style.left=null,n.style.width=null,n.style.zIndex=null,n.style.marginTop=null,n.style.marginBottom=null,i.style.display="none"}},startObserving:function(){if(e.observer)e.observer.disconnect();else{let t=window.MutationObserver||window.WebKitMutationObserver;e.observer=new t(e.init)}e.observer.observe(document.body,{attributes:!0,characterData:!0,subtree:!0})},stopObserving:function(){e.observer&&e.observer.disconnect()},getOverlap:function(e,t){let s=0,l=0;for(let o=0;o<t.length;o++)e[0]<t[o][0]&&e[1]+e[2]>t[o][1]&&t[o][1]+t[o][2]>e[1]&&(s=Math.max(s,t[o][0]-e[0]),l=Math.max(l,t[o][0]));return{overlap:s,absolute:l}},sortByTop:function(e,t){return e.top-t.top},getCoords:function(e){let t=e.getBoundingClientRect(),s=document.body,l=document.documentElement,o=window.pageYOffset||l.scrollTop||s.scrollTop,n=window.pageXOffset||l.scrollLeft||s.scrollLeft,i=l.clientTop||s.clientTop||0,r=l.clientLeft||s.clientLeft||0,a=t.top+o-i,p=t.left+n-r;return{top:Math.round(a),left:Math.round(p)}},hasClass:function(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},addClass:function(t,s){t.classList?t.classList.add(s):e.hasClass(t,s)||(t.className+=" "+s)},removeClass:function(t,s){if(t.classList)t.classList.remove(s);else if(e.hasClass(t,s)){var l=new RegExp("(\\s|^)"+s+"(\\s|$)");t.className=t.className.replace(l," ")}}};window.addEventListener("load",e.init),window.addEventListener("resize",e.init),window.addEventListener("scroll",e.update),window.addEventListener("load",function(){setTimeout(function(){e.update()},500)})}