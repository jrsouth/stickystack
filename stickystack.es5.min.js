"use strict";/* @preserve
 *
 * StickyStack
 *
 * A vanilla javascript sticky-element stacker
 *
 * For licence details and usage see:
 * https://github.com/jrsouth/stickystack
 *
 */
!function(){var e={mobileBreak:768,list:[],number:0,stackTop:0,init:function(){e.stopObserving();for(var t=0;t<e.number;t++){var s=e.list[t].placeholder,o=e.list[t].element;s.parentNode.removeChild(s),e.removeClass(o,"stickystack-stuck"),o.style.position=null,o.style.top=null,o.style.left=null,o.style.width=null,o.style.marginTop=null,o.style.marginBottom=null}e.number=0;var l=document.getElementsByClassName("js-stickystack");if(window.innerWidth<=e.mobileBreak){for(var n=[],r=0;r<l.length;r++)e.hasClass(l[r],"js-stickystack-nomobile")||n.push(l[r]);l=n}e.number=l.length,e.list=[],e.stackTop=0;for(var a=0;a<e.number;a++){var i=window.getComputedStyle(l[a]),d=document.createElement("div");d.style.width=i.getPropertyValue("width"),d.style.height=i.getPropertyValue("height"),d.style.top=i.getPropertyValue("top"),d.style.right=i.getPropertyValue("right"),d.style.bottom=i.getPropertyValue("bottom"),d.style.left=i.getPropertyValue("left"),d.style.margin=i.getPropertyValue("margin"),d.style.padding=i.getPropertyValue("padding"),d.style.border=i.getPropertyValue("border"),d.style.float=i.getPropertyValue("float"),d.style.clear=i.getPropertyValue("clear"),d.style.position=i.getPropertyValue("position"),d.style.display="none",d.style.visibility="hidden",l[a].parentNode.insertBefore(d,l[a]);var u=e.getCoords(l[a]);e.list.push({element:l[a],top:u.top,left:u.left-parseFloat(i.getPropertyValue("margin-left")),width:parseFloat(i.getPropertyValue("width")),placeholder:d,semistuck:e.hasClass(l[a],"js-stickystack-semi"),zIndex:100-a})}e.list.sort(e.sortByTop),e.stackTop=0,l=document.getElementsByClassName("js-stickystack-top");for(var c=0;c<l.length;c++){var p=e.getCoords(l[c]).top;e.stackTop=0==c?p:Math.min(e.stackTop,p)}e.update(),e.startObserving()},update:function(){for(var t=[[e.stackTop,0,document.body.offsetWidth]],s=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,o=0;o<e.number;o++){var l=e.list[o],n=l.element,r=l.placeholder,a=l.left,i=l.top-s,d=l.width,u=e.getOverlap([i,a,d],t);if(u.overlap>0){r.style.display="block",e.addClass(n,"stickystack-stuck");var c=0;if(e.list[o].semistuck&&o+1<e.number)for(var p=[[u.absolute+n.offsetHeight,a,d]],y=o+1;y<e.number;y++){var f=[e.list[y].top-s,e.list[y].left,e.list[y].width],m=e.getOverlap(f,p);if(m.overlap>0){c=m.overlap;break}}n.style.position="fixed",n.style.top=u.absolute-c+"px",n.style.left=a+"px",n.style.width=d+"px",n.style.zIndex=l.zIndex,n.style.marginTop=0,n.style.marginBottom=0,t.push([u.absolute+n.offsetHeight-c,n.offsetLeft,n.offsetWidth])}else e.removeClass(n,"stickystack-stuck"),n.style.position=null,n.style.top=null,n.style.left=null,n.style.width=null,n.style.zIndex=null,n.style.marginTop=null,n.style.marginBottom=null,r.style.display="none"}},startObserving:function(){if(e.observer)e.observer.disconnect();else{var t=window.MutationObserver||window.WebKitMutationObserver;e.observer=new t(e.init)}e.observer.observe(document.body,{attributes:!0,characterData:!0,subtree:!0})},stopObserving:function(){e.observer&&e.observer.disconnect()},getOverlap:function(e,t){for(var s=0,o=0,l=0;l<t.length;l++)e[0]<t[l][0]&&e[1]+e[2]>t[l][1]&&t[l][1]+t[l][2]>e[1]&&(s=Math.max(s,t[l][0]-e[0]),o=Math.max(o,t[l][0]));return{overlap:s,absolute:o}},sortByTop:function(e,t){return e.top-t.top},getCoords:function(e){var t=e.getBoundingClientRect(),s=document.body,o=document.documentElement,l=window.pageYOffset||o.scrollTop||s.scrollTop,n=window.pageXOffset||o.scrollLeft||s.scrollLeft,r=o.clientTop||s.clientTop||0,a=o.clientLeft||s.clientLeft||0,i=t.top+l-r,d=t.left+n-a;return{top:Math.round(i),left:Math.round(d)}},hasClass:function(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},addClass:function(t,s){t.classList?t.classList.add(s):e.hasClass(t,s)||(t.className+=" "+s)},removeClass:function(t,s){if(t.classList)t.classList.remove(s);else if(e.hasClass(t,s)){var o=new RegExp("(\\s|^)"+s+"(\\s|$)");t.className=t.className.replace(o," ")}}};window.addEventListener("DOMContentLoaded",e.init),window.addEventListener("load",e.init),window.addEventListener("resize",e.init),window.addEventListener("scroll",e.update),window.addEventListener("touchmove",e.update),window.ontouchstart=function(){},window.addEventListener("DOMContentLoaded",function(){setTimeout(function(){e.update()},500)}),window.addEventListener("load",function(){setTimeout(function(){e.update()},500)})}();