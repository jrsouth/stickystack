"use strict";/* @preserve
 *
 * StickyStack
 *
 * A vanilla javascript sticky-element stacker
 *
 * For licence details and usage see:
 * https://github.com/jrsouth/stickystack
 *
 */
!function(){var t={mobileBreak:768,list:[],number:0,stackTop:0,pageBottom:null,init:function(){t.stopObserving(),t.pageBottom&&t.pageBottom.parentNode.removeChild(t.pageBottom);for(var e=0;e<t.number;e++){var o=t.list[e].placeholder,s=t.list[e].element;o.parentNode.removeChild(o),t.removeClass(s,"stickystack-stuck"),s.style.position=null,s.style.top=null,s.style.left=null,s.style.width=null,s.style.marginTop=null,s.style.marginBottom=null}t.pageBottom=document.createElement("div"),t.pageBottom.style.height=0,t.pageBottom.style.width="100%",t.addClass(t.pageBottom,"js-stickystack"),document.body.appendChild(t.pageBottom),t.number=0;var l=document.getElementsByClassName("js-stickystack");if(window.innerWidth<=t.mobileBreak){for(var n=[],a=0;a<l.length;a++)t.hasClass(l[a],"js-stickystack-nomobile")||n.push(l[a]);l=n}t.number=l.length,t.list=[],t.stackTop=0;for(var r=0;r<t.number;r++){var i=window.getComputedStyle(l[r]),d=document.createElement("div");d.style.width=i.getPropertyValue("width"),d.style.height=i.getPropertyValue("height"),d.style.top=i.getPropertyValue("top"),d.style.right=i.getPropertyValue("right"),d.style.bottom=i.getPropertyValue("bottom"),d.style.left=i.getPropertyValue("left"),d.style.margin=i.getPropertyValue("margin"),d.style.padding=i.getPropertyValue("padding"),d.style.border=i.getPropertyValue("border"),d.style.float=i.getPropertyValue("float"),d.style.clear=i.getPropertyValue("clear"),d.style.position=i.getPropertyValue("position"),d.style.display="none",d.style.visibility="hidden",l[r].parentNode.insertBefore(d,l[r]);var p=t.getCoords(l[r]);t.list.push({element:l[r],top:p.top,left:p.left-parseFloat(i.getPropertyValue("margin-left")),width:parseFloat(i.getPropertyValue("width")),placeholder:d,semistuck:t.hasClass(l[r],"js-stickystack-semi"),zIndex:100-r})}t.list.sort(t.sortByTop),t.stackTop=0,l=document.getElementsByClassName("js-stickystack-top");for(var u=0;u<l.length;u++){var c=t.getCoords(l[u]).top;t.stackTop=0==u?c:Math.min(t.stackTop,c)}t.update(),t.startObserving()},update:function(){for(var e=[[t.stackTop,0,document.body.offsetWidth]],o=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,s=0;s<t.number;s++){var l=t.list[s],n=l.element,a=l.placeholder,r=l.left,i=l.top-o,d=l.width,p=t.getOverlap([i,r,d],e);if(p.overlap>0){a.style.display="block",t.addClass(n,"stickystack-stuck");var u=0;if(t.list[s].semistuck&&s+1<t.number)for(var c=[[p.absolute+n.offsetHeight,r,d]],m=s+1;m<t.number;m++){var y=[t.list[m].top-o,t.list[m].left,t.list[m].width],f=t.getOverlap(y,c);if(f.overlap>0){u=f.overlap;break}}n.style.position="fixed",n.style.top=p.absolute-u+"px",n.style.left=r+"px",n.style.width=d+"px",n.style.zIndex=l.zIndex,n.style.marginTop=0,n.style.marginBottom=0,e.push([p.absolute+n.offsetHeight-u,n.offsetLeft,n.offsetWidth])}else t.removeClass(n,"stickystack-stuck"),n.style.position=null,n.style.top=null,n.style.left=null,n.style.width=null,n.style.zIndex=null,n.style.marginTop=null,n.style.marginBottom=null,a.style.display="none"}},startObserving:function(){if(t.observer)t.observer.disconnect();else{var e=window.MutationObserver||window.WebKitMutationObserver;t.observer=new e(t.init)}t.observer.observe(document.body,{attributes:!0,characterData:!0,subtree:!0})},stopObserving:function(){t.observer&&t.observer.disconnect()},getOverlap:function(t,e){for(var o=0,s=0,l=0;l<e.length;l++)t[0]<e[l][0]&&t[1]+t[2]>e[l][1]&&e[l][1]+e[l][2]>t[1]&&(o=Math.max(o,e[l][0]-t[0]),s=Math.max(s,e[l][0]));return{overlap:o,absolute:s}},sortByTop:function(t,e){return t.top-e.top},getCoords:function(t){var e=t.getBoundingClientRect(),o=document.body,s=document.documentElement,l=window.pageYOffset||s.scrollTop||o.scrollTop,n=window.pageXOffset||s.scrollLeft||o.scrollLeft,a=s.clientTop||o.clientTop||0,r=s.clientLeft||o.clientLeft||0,i=e.top+l-a,d=e.left+n-r;return{top:Math.round(i),left:Math.round(d)}},hasClass:function(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},addClass:function(e,o){e.classList?e.classList.add(o):t.hasClass(e,o)||(e.className+=" "+o)},removeClass:function(e,o){if(e.classList)e.classList.remove(o);else if(t.hasClass(e,o)){var s=new RegExp("(\\s|^)"+o+"(\\s|$)");e.className=e.className.replace(s," ")}}};window.addEventListener("DOMContentLoaded",t.init),window.addEventListener("load",t.init),window.addEventListener("resize",t.init),window.addEventListener("scroll",t.update),window.addEventListener("touchmove",t.update),window.ontouchstart=function(){},window.addEventListener("DOMContentLoaded",function(){setTimeout(function(){t.update()},500)}),window.addEventListener("load",function(){setTimeout(function(){t.update()},500)})}();